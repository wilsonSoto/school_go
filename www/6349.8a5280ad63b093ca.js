"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6349],{6349:(K,f,a)=>{a.r(f),a.d(f,{HttpLoaderFactory:()=>C,Tab2PageModule:()=>W});var r=a(7125),u=a(8834),v=a(9417),h=a(5528),b=a(467),T=a(7689),P=a(7468),_=a(8810),E=a(7673),F=a(6354),m=a(9437),M=a(8141),V=a(980),k=a(4033),e=a(9498),p=a(7408),D=a(3491),j=a(8397),g=a(7461);function $(t,s){if(1&t){const i=e.RV6();e.j41(0,"ion-card",1),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.showDetails())}),e.nrm(1,"ion-ripple-effect"),e.j41(2,"ion-card-header")(3,"ion-avatar"),e.nrm(4,"img",2),e.k0s(),e.j41(5,"span")(6,"ion-card-title"),e.EFF(7),e.k0s(),e.j41(8,"ion-card-subtitle"),e.EFF(9),e.k0s()()(),e.j41(10,"ion-card-content")(11,"p")(12,"ion-label"),e.EFF(13,"Capacidad: "),e.j41(14,"ion-note"),e.EFF(15),e.k0s()()(),e.j41(16,"p")(17,"ion-label"),e.EFF(18,"Color: "),e.j41(19,"ion-note"),e.EFF(20),e.k0s()()(),e.j41(21,"p")(22,"ion-label"),e.EFF(23,"Conductor Asignado: "),e.j41(24,"ion-note"),e.EFF(25),e.k0s()()(),e.j41(26,"p")(27,"ion-label"),e.EFF(28,"ID de la Placa: "),e.j41(29,"ion-note"),e.EFF(30),e.k0s()()()(),e.j41(31,"div",3),e.nrm(32,"ion-icon",4)(33,"ion-icon",4),e.k0s()()}if(2&t){const i=e.XpG();e.R7$(4),e.Y8G("src",i.currentVehicle.vehicule_image||"https://ionicframework.com/docs/img/demos/bus.png",e.B4B),e.R7$(3),e.JRh(i.currentVehicle.name),e.R7$(2),e.Lme("",i.currentVehicle.brand||"Marca no especificada"," - ",i.currentVehicle.model||"Modelo no especificado",""),e.R7$(6),e.SpI("",i.currentVehicle.people_capacity||"N/A"," personas"),e.R7$(5),e.JRh(i.currentVehicle.vehicle_color||"N/A"),e.R7$(5),e.JRh((null==i.currentVehicle.school_driver?null:i.currentVehicle.school_driver.name)||"N/A"),e.R7$(5),e.JRh(i.currentVehicle.name)}}let y=(()=>{var t;class s{constructor(n){this.translate=n,this.currentVehicle=null,this.handleActionDriver=new e.bkB}changeLanguage(n){this.translate.use(n="es"==n?"en":"es")}showDetails(){this.handleActionDriver.emit("edit")}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(p.c$))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-vehicles"]],inputs:{currentVehicle:"currentVehicle"},outputs:{handleActionDriver:"handleActionDriver"},standalone:!1,decls:1,vars:1,consts:[["class","ion-activatable ripple-parent ion-margin-top",3,"click",4,"ngIf"],[1,"ion-activatable","ripple-parent","ion-margin-top",3,"click"],["alt","Bus Image",3,"src"],[1,"card-footer-buttons"],["name","chevron-forward-outline"]],template:function(n,o){1&n&&e.DNE(0,$,34,8,"ion-card",0),2&n&&e.Y8G("ngIf",o.currentVehicle)},dependencies:[r.mC,r.b_,r.I9,r.ME,r.HW,r.tN,r.iq,r.he,r.JI,r.S7,u.I],styles:["ion-card[_ngcontent-%COMP%]{position:relative}ion-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:64px;right:23px}ion-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px;margin:0 -6px}"]}),s})();function G(t,s){if(1&t){const i=e.RV6();e.j41(0,"ion-card",1),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.showDetails())}),e.nrm(1,"ion-ripple-effect"),e.j41(2,"ion-card-header")(3,"ion-avatar"),e.nrm(4,"img",2),e.k0s(),e.j41(5,"span")(6,"ion-card-title"),e.EFF(7),e.k0s(),e.j41(8,"ion-card-subtitle"),e.EFF(9),e.k0s()()(),e.j41(10,"ion-card-content")(11,"p")(12,"ion-label"),e.EFF(13,"Tel\xe9fono: "),e.j41(14,"ion-note"),e.EFF(15),e.k0s()()(),e.j41(16,"p")(17,"ion-label"),e.EFF(18,"M\xf3vil: "),e.j41(19,"ion-note"),e.EFF(20),e.k0s()()(),e.j41(21,"p")(22,"ion-label"),e.EFF(23,"Licencia: "),e.j41(24,"ion-note"),e.EFF(25),e.k0s()()(),e.j41(26,"p")(27,"ion-label"),e.EFF(28,"Direcci\xf3n: "),e.j41(29,"ion-note"),e.EFF(30),e.k0s()()()(),e.j41(31,"div",3),e.nrm(32,"ion-icon",4)(33,"ion-icon",4),e.k0s()()}if(2&t){const i=e.XpG();e.R7$(4),e.Y8G("src",i.currentDriver.profile||"https://ionicframework.com/docs/img/demos/avatar.svg",e.B4B),e.R7$(3),e.JRh(i.currentDriver.name),e.R7$(2),e.JRh(i.currentDriver.email),e.R7$(6),e.JRh(i.currentDriver.phone||"N/A"),e.R7$(5),e.JRh(i.currentDriver.mobile||"N/A"),e.R7$(5),e.JRh(i.currentDriver.driver_license||"N/A"),e.R7$(5),e.JRh(i.currentDriver.address||"N/A")}}let A=(()=>{var t;class s{constructor(n,o,l){this.translate=n,this.toastService=o,this.driversService=l,this.currentDriver=null,this.handleActionDriver=new e.bkB}changeLanguage(n){this.translate.use(n="es"==n?"en":"es")}showDetails(){this.handleActionDriver.emit("edit")}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(p.c$),e.rXU(j.f),e.rXU(g.h))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-drivers"]],inputs:{currentDriver:"currentDriver"},outputs:{handleActionDriver:"handleActionDriver"},standalone:!1,decls:1,vars:1,consts:[["class","ion-activatable ripple-parent ion-margin-top",3,"click",4,"ngIf"],[1,"ion-activatable","ripple-parent","ion-margin-top",3,"click"],["alt","Driver Profile",3,"src"],[1,"card-footer-buttons"],["name","chevron-forward-outline"]],template:function(n,o){1&n&&e.DNE(0,G,34,7,"ion-card",0),2&n&&e.Y8G("ngIf",o.currentDriver)},dependencies:[r.mC,r.b_,r.I9,r.ME,r.HW,r.tN,r.iq,r.he,r.JI,r.S7,u.I],styles:["ion-card[_ngcontent-%COMP%]{position:relative}ion-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:64px;right:23px}ion-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px;margin:0 -6px}"]}),s})();const R=()=>["/add-bus"];function I(t,s){1&t&&(e.j41(0,"div",19),e.nrm(1,"ion-spinner",20),e.j41(2,"p"),e.EFF(3,"Cargando Rutas..."),e.k0s()())}function x(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",21),e.nrm(1,"ion-icon",22),e.j41(2,"p"),e.EFF(3),e.k0s(),e.j41(4,"ion-button",23),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.loadDriversAndBuses())}),e.EFF(5,"Reintentar"),e.k0s()()}if(2&t){const i=e.XpG();e.R7$(3),e.JRh(i.errorMessage)}}function B(t,s){if(1&t){const i=e.RV6();e.j41(0,"app-drivers",28),e.bIt("handleActionDriver",function(o){const l=e.eBV(i).$implicit,c=e.XpG(2);return e.Njj(c.handleOpenDriverModal(o,l))}),e.k0s()}2&t&&e.Y8G("currentDriver",s.$implicit)}function O(t,s){if(1&t){const i=e.RV6();e.j41(0,"app-vehicles",29),e.bIt("handleActionDriver",function(o){const l=e.eBV(i).$implicit,c=e.XpG(2);return e.Njj(c.handleOpenBusModal(o,l))}),e.k0s()}2&t&&e.Y8G("currentVehicle",s.$implicit)}function L(t,s){if(1&t&&(e.j41(0,"ion-segment-view")(1,"ion-segment-content",24),e.DNE(2,B,1,1,"app-drivers",25),e.k0s(),e.j41(3,"ion-segment-content",26),e.DNE(4,O,1,1,"app-vehicles",27),e.k0s()()),2&t){const i=e.XpG();e.R7$(2),e.Y8G("ngForOf",i.currentDrivers),e.R7$(2),e.Y8G("ngForOf",i.currentVehicles)}}function N(t,s){1&t&&(e.j41(0,"ion-fab",30)(1,"ion-fab-button",31),e.nrm(2,"ion-icon",32),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.lJ4(1,R)))}function Y(t,s){1&t&&(e.j41(0,"ion-fab",30)(1,"ion-fab-button",31),e.nrm(2,"ion-icon",32),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.lJ4(1,R)))}function J(t,s){1&t&&(e.j41(0,"ion-content")(1,"ion-list")(2,"ion-item",33),e.EFF(3,"Cerrar Sesi\xf3n"),e.k0s()()()),2&t&&(e.R7$(2),e.Y8G("button",!0)("detail",!1))}const S=[{path:"",component:(()=>{var t;class s{constructor(n,o,l,c,d){this.translate=n,this.modalController=o,this.busService=l,this.toastService=c,this.driversService=d,this.typeSelect="first",this.currentDrivers=[],this.currentVehicles=[],this.isLoading=!0,this.errorMessage=null}ionViewWillEnter(){console.log("Tab3Page: ionViewWillEnter - La p\xe1gina va a ser visible"),this.loadDriversAndBuses()}changeLanguage(n){this.translate.use(n="es"==n?"en":"es")}handleRefresh(n){this.loadDriversAndBuses(),setTimeout(()=>{n.target.complete()},2e3)}handleOpenDriverModal(n,o){var l=this;return(0,b.A)(function*(){try{const c=yield l.modalController.create({component:T.K,componentProps:{action:n,driver:o},initialBreakpoint:1,breakpoints:[0,1],cssClass:["loading-truck-options-sheet-modal"]});yield c.present();const{data:d}=yield c.onWillDismiss();if("cancel"===d.action)return}catch{}})()}handleOpenBusModal(n,o){var l=this;return(0,b.A)(function*(){try{const c=yield l.modalController.create({component:k.o,componentProps:{action:n,bus:o},initialBreakpoint:1,breakpoints:[0,1],cssClass:["loading-truck-options-sheet-modal"]});yield c.present();const{data:d}=yield c.onWillDismiss();if("cancel"===d.action)return}catch{}})()}loadDriversAndBuses(){this.isLoading=!0,this.errorMessage=null,(0,P.p)({drivers:this.driversService.getAllDrivers().pipe((0,F.T)(n=>{var o;return(null==n||null===(o=n.data)||void 0===o?void 0:o.school_drivers)||[]}),(0,m.W)(n=>(console.error("Error fetching drivers:",n),(0,_.$)(()=>new Error(n.message||"Failed to load drivers"))))),buses:this.busService.getAllBuses().pipe((0,F.T)(n=>{var o;return(null==n||null===(o=n.data)||void 0===o?void 0:o.school_buses)||[]}),(0,m.W)(n=>(console.error("Error fetching buses:",n),(0,_.$)(()=>new Error(n.message||"Failed to load buses")))))}).pipe((0,M.M)(n=>{this.currentDrivers=n.drivers,this.currentVehicles=n.buses}),(0,m.W)(n=>(console.error("Failed to load drivers or buses:",n),this.errorMessage="Error al cargar los conductores o autobuses: "+(n.message||"Error desconocido"),(0,E.of)(null))),(0,V.j)(()=>{this.isLoading=!1})).subscribe()}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(p.c$),e.rXU(r.W3),e.rXU(D.b),e.rXU(j.f),e.rXU(g.h))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tab2"]],standalone:!1,decls:30,vars:8,consts:[[1,"i-header"],[1,"i-toolbar-inner"],[1,"i-toolbar"],["size","large"],["size","auto"],["id","driver-bus-button"],["alt","Silhouette of a person's head","src","https://ionicframework.com/docs/img/demos/avatar.svg"],[1,"segment"],["size","mediun","mode","ios","show-clear-button","always","clear-icon","trash-bin","value","Custom Clear Icon"],["size","large","mode","ios",3,"ngModelChange","ngModel"],["value","first","content-id","first"],["value","second","content-id","second"],[1,"",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["class","loading-state ion-text-center",4,"ngIf"],["class","error-state ion-text-center",4,"ngIf"],[4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end",4,"ngIf"],["trigger","driver-bus-button",3,"dismissOnSelect"],[1,"loading-state","ion-text-center"],["name","circles"],[1,"error-state","ion-text-center"],["name","warning-outline","color","danger"],[3,"click"],["id","first"],[3,"currentDriver","handleActionDriver",4,"ngFor","ngForOf"],["id","second"],[3,"currentVehicle","handleActionDriver",4,"ngFor","ngForOf"],[3,"handleActionDriver","currentDriver"],[3,"handleActionDriver","currentVehicle"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"routerLink"],["name","add"],["routerLink","/sign-in",3,"button","detail"]],template:function(n,o){1&n&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"div",1)(3,"ion-row",2)(4,"ion-col")(5,"ion-title",3),e.EFF(6," Choferes y Vehiculos "),e.k0s()(),e.j41(7,"ion-col",4)(8,"div")(9,"ion-avatar",5),e.nrm(10,"img",6),e.k0s()()()()(),e.j41(11,"div",7),e.nrm(12,"ion-searchbar",8),e.j41(13,"ion-segment",9),e.mxI("ngModelChange",function(c){return e.DH7(o.typeSelect,c)||(o.typeSelect=c),c}),e.j41(14,"ion-segment-button",10)(15,"ion-label"),e.EFF(16,"Choferes "),e.k0s()(),e.j41(17,"ion-segment-button",11)(18,"ion-label"),e.EFF(19,"Vehiculos"),e.k0s()()()()()(),e.j41(20,"ion-content",12)(21,"ion-refresher",13),e.bIt("ionRefresh",function(c){return o.handleRefresh(c)}),e.nrm(22,"ion-refresher-content"),e.k0s(),e.DNE(23,I,4,0,"div",14)(24,x,6,1,"div",15)(25,L,5,2,"ion-segment-view",16)(26,N,3,2,"ion-fab",17)(27,Y,3,2,"ion-fab",17),e.k0s(),e.j41(28,"ion-popover",18),e.DNE(29,J,4,2,"ng-template"),e.k0s()),2&n&&(e.R7$(13),e.R50("ngModel",o.typeSelect),e.R7$(7),e.Y8G("fullscreen",!0),e.R7$(3),e.Y8G("ngIf",o.isLoading),e.R7$(),e.Y8G("ngIf",o.errorMessage),e.R7$(),e.Y8G("ngIf",!o.isLoading),e.R7$(),e.Y8G("ngIf",!o.isLoading),e.R7$(),e.Y8G("ngIf",!o.isLoading),e.R7$(),e.Y8G("dismissOnSelect",!0))},dependencies:[r.mC,r.Jm,r.hU,r.W9,r.Q8,r.YW,r.eU,r.iq,r.uz,r.he,r.nf,r.To,r.Ki,r.ln,r.S1,r.Gp,r.eP,r.Z$,r.pf,r.w2,r.BC,r.ai,r.CF,r.Je,r.Gw,r.N7,u.G,u.I,v.BC,v.vS,h.R,y,A],styles:["ion-toolbar[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{margin:0 11px 7px}"]}),s})()}];let X=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.m.forChild(S),h.m]}),s})();var w=a(5218),U=a(8041);function C(t){return new w.s(t,"./assets/translate/",".json")}let W=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({providers:[g.h,D.b],imports:[r.bv,u.D,v.YN,X,v.X1,p.h.forRoot({defaultLanguage:"es",loader:{provide:p.Wr,useFactory:C,deps:[U.a]}})]}),s})()}}]);