"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8606],{8606:(L,m,s)=>{s.r(m),s.d(m,{DriverPageModule:()=>I,HttpLoaderFactory:()=>f});var r=s(7125),d=s(8834),c=s(9417),g=s(5528),h=s(467),e=s(9498),p=s(7408),_=s(3975),v=s(2167),R=s(8397),P=s(5690);function F(o,a){1&o&&(e.j41(0,"div",18),e.nrm(1,"ion-spinner",19),e.j41(2,"p"),e.EFF(3,"Cargando Rutas..."),e.k0s()())}function j(o,a){if(1&o){const i=e.RV6();e.j41(0,"div",20),e.nrm(1,"ion-icon",21),e.j41(2,"p"),e.EFF(3),e.k0s(),e.j41(4,"ion-button",22),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.getAllRoute())}),e.EFF(5,"Reintentar"),e.k0s()()}if(2&o){const i=e.XpG();e.R7$(3),e.JRh(i.errorMessage)}}function M(o,a){if(1&o){const i=e.RV6();e.j41(0,"app-all-route",26),e.bIt("click",function(){const n=e.eBV(i).$implicit,l=e.XpG(2);return e.Njj(l.handleOpenRouteModal("edit",n))}),e.k0s()}2&o&&e.Y8G("route",a.$implicit)}function y(o,a){if(1&o){const i=e.RV6();e.j41(0,"app-all-route",26),e.bIt("click",function(){const n=e.eBV(i).$implicit,l=e.XpG(2);return e.Njj(l.handleOpenRouteModal("edit",n))}),e.k0s()}2&o&&e.Y8G("route",a.$implicit)}function G(o,a){if(1&o&&(e.j41(0,"ion-segment-view")(1,"ion-segment-content",23),e.DNE(2,M,1,1,"app-all-route",24),e.k0s(),e.j41(3,"ion-segment-content",25),e.DNE(4,y,1,1,"app-all-route",24),e.k0s()()),2&o){const i=e.XpG();e.R7$(2),e.Y8G("ngForOf",i.school_routes_pickup),e.R7$(2),e.Y8G("ngForOf",i.school_routes_delivery)}}function C(o,a){1&o&&(e.j41(0,"ion-content")(1,"ion-list")(2,"ion-item",27),e.EFF(3,"Cerrar Sesi\xf3n"),e.k0s()()()),2&o&&(e.R7$(2),e.Y8G("button",!0)("detail",!1))}const $=[{path:"",component:(()=>{var o;class a{constructor(t,n,l,u,T){this.translate=t,this.router=n,this.routeService=l,this.toastService=u,this.modalController=T,this.typeSelect="first",this.userData="",this.students=[],this.school_routes_pickup=[],this.school_routes_delivery=[],this.isLoading=!0,this.errorMessage=null}changeLanguage(t){this.translate.use(t="es"==t?"en":"es")}ionViewWillEnter(){var t=this;return(0,h.A)(function*(){var n;t.userData=yield null===(n=JSON.parse(localStorage.getItem("userData")||"null"))||void 0===n?void 0:n.userInfo,t.getAllRoute()})()}handleRefresh(t){this.getAllRoute(),setTimeout(()=>{t.target.complete()},2e3)}getAllRoute(){this.isLoading=!0,this.errorMessage=null,console.log("....................................................................1111"),this.routeService.getAllroute().subscribe({next:t=>{this.isLoading=!1,console.log(t,"respo ,,,,,,,,,,,,,,,,,,,,,,"),this.school_routes_pickup=t.data.school_routes.filter(n=>"Recogida"==n.route_type),this.school_routes_delivery=t.data.school_routes.filter(n=>"Recogida"!==n.route_type)},error:t=>{var n,l;this.isLoading=!1,this.errorMessage="Error al cargar las rutas: "+(t.message||"Error desconocido");const u=(null==t||null===(n=t.error)||void 0===n||null===(n=n.error)||void 0===n?void 0:n.message)||(null==t||null===(l=t.error)||void 0===l?void 0:l.error)||(null==t?void 0:t.message)||"Error desconocido";this.toastService.presentToast(u)}})}handleOpenRouteModal(t,n){n.id||console.log("error id route"),this.router.navigate([`/planned-route/${n.id}`],{queryParams:{action:t}})}}return(o=a).\u0275fac=function(t){return new(t||o)(e.rXU(p.c$),e.rXU(_.t),e.rXU(v.v),e.rXU(R.f),e.rXU(r.W3))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-route-page"]],standalone:!1,decls:28,vars:6,consts:[[1,"i-header"],[1,"i-toolbar-inner"],[1,"i-toolbar"],["size","large"],["size","auto"],["id","driver-bus-button"],["alt","Silhouette of a person's head","src","https://ionicframework.com/docs/img/demos/avatar.svg"],[1,"segment"],["size","mediun","mode","ios","show-clear-button","always","clear-icon","trash-bin","value","Custom Clear Icon"],["size","large","mode","ios",3,"ngModelChange","ngModel"],["value","first","content-id","first"],["value","second","content-id","second"],[1,"",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["class","loading-state ion-text-center",4,"ngIf"],["class","error-state ion-text-center",4,"ngIf"],[4,"ngIf"],["trigger","driver-bus-button",3,"dismissOnSelect"],[1,"loading-state","ion-text-center"],["name","circles"],[1,"error-state","ion-text-center"],["name","warning-outline","color","danger"],[3,"click"],["id","first"],[3,"route","click",4,"ngFor","ngForOf"],["id","second"],[3,"click","route"],["routerLink","/sign-in",3,"button","detail"]],template:function(t,n){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"div",1)(3,"ion-row",2)(4,"ion-col")(5,"ion-title",3),e.EFF(6,"Rutas programadas "),e.k0s()(),e.j41(7,"ion-col",4)(8,"div")(9,"ion-avatar",5),e.nrm(10,"img",6),e.k0s()()()()(),e.j41(11,"div",7),e.nrm(12,"ion-searchbar",8),e.j41(13,"ion-segment",9),e.mxI("ngModelChange",function(u){return e.DH7(n.typeSelect,u)||(n.typeSelect=u),u}),e.j41(14,"ion-segment-button",10)(15,"ion-label"),e.EFF(16,"Recogida "),e.k0s()(),e.j41(17,"ion-segment-button",11)(18,"ion-label"),e.EFF(19,"Entrega"),e.k0s()()()()()(),e.j41(20,"ion-content",12)(21,"ion-refresher",13),e.bIt("ionRefresh",function(u){return n.handleRefresh(u)}),e.nrm(22,"ion-refresher-content"),e.k0s(),e.DNE(23,F,4,0,"div",14)(24,j,6,1,"div",15)(25,G,5,2,"ion-segment-view",16),e.k0s(),e.j41(26,"ion-popover",17),e.DNE(27,C,4,2,"ng-template"),e.k0s()),2&t&&(e.R7$(13),e.R50("ngModel",n.typeSelect),e.R7$(7),e.Y8G("fullscreen",!0),e.R7$(3),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",n.errorMessage),e.R7$(),e.Y8G("ngIf",!n.isLoading),e.R7$(),e.Y8G("dismissOnSelect",!0))},dependencies:[r.mC,r.Jm,r.hU,r.W9,r.eU,r.iq,r.uz,r.he,r.nf,r.To,r.Ki,r.ln,r.S1,r.Gp,r.eP,r.Z$,r.pf,r.w2,r.BC,r.ai,r.CF,r.Je,r.Gw,r.N7,d.G,d.I,c.BC,c.vS,g.R,P.E],styles:["ion-toolbar[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{margin:0 5px}"]}),a})()}];let D=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.m.forChild($),g.m]}),a})();var k=s(5218),S=s(8041),E=s(1150);function f(o){return new k.s(o,"./assets/translate/",".json")}let I=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({providers:[v.v],imports:[r.bv,d.D,c.YN,D,c.X1,p.h.forRoot({defaultLanguage:"es",loader:{provide:p.Wr,useFactory:f,deps:[S.a]}}),E.G]}),a})()}}]);