"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5113],{5113:(E,d,r)=>{r.r(d),r.d(d,{Tab3PageModule:()=>L});var i=r(7125),u=r(8834),p=r(9417),g=r(5528),h=r(1432),e=r(9498),v=r(2167),m=r(8397),f=r(3975),b=r(7291),T=r(5690);function P(o,s){1&o&&(e.j41(0,"div",14),e.nrm(1,"ion-spinner",15),e.j41(2,"p"),e.EFF(3,"Cargando Rutas..."),e.k0s()())}function R(o,s){if(1&o){const a=e.RV6();e.j41(0,"div",16),e.nrm(1,"ion-icon",17),e.j41(2,"p"),e.EFF(3),e.k0s(),e.j41(4,"ion-button",18),e.bIt("click",function(){e.eBV(a);const n=e.XpG();return e.Njj(n.getAllRoute())}),e.EFF(5,"Reintentar"),e.k0s()()}if(2&o){const a=e.XpG();e.R7$(3),e.JRh(a.errorMessage)}}function _(o,s){if(1&o){const a=e.RV6();e.j41(0,"app-all-route",20),e.bIt("click",function(){const n=e.eBV(a).$implicit,l=e.XpG(2);return e.Njj(l.handleOpenRouteModal("edit",n))}),e.k0s()}2&o&&e.Y8G("route",s.$implicit)}function M(o,s){if(1&o&&(e.j41(0,"ion-list"),e.DNE(1,_,1,1,"app-all-route",19),e.k0s()),2&o){const a=e.XpG();e.R7$(),e.Y8G("ngForOf",a.school_routes)}}function j(o,s){1&o&&(e.j41(0,"ion-content")(1,"ion-list")(2,"ion-item",21),e.EFF(3,"Cerrar Sesi\xf3n"),e.k0s()()()),2&o&&(e.R7$(2),e.Y8G("button",!0)("detail",!1))}const F=[{path:"",component:(()=>{var o;class s{constructor(t,n,l,c,k){this.routeService=t,this.toastService=n,this.router=l,this.modalController=c,this.storage=k,this.school_routes=[],this.token="",this.isLoading=!0,this.errorMessage=null}ngOnInit(){const t=this;this.storage.get(h.N.FCM_TOKEN).then(n=>{t.token=JSON.stringify(n)})}handleRefresh(t){this.getAllRoute(),setTimeout(()=>{t.target.complete()},2e3)}ionViewWillEnter(){console.log("Tab3Page: ionViewWillEnter - La p\xe1gina va a ser visible"),this.getAllRoute()}ionViewDidEnter(){console.log("Tab3Page: ionViewDidEnter - La p\xe1gina ya es visible")}ionViewWillLeave(){console.log("Tab3Page: ionViewWillLeave - La p\xe1gina va a dejar de ser visible")}ionViewDidLeave(){console.log("Tab3Page: ionViewDidLeave - La p\xe1gina ha dejado de ser visible")}getAllRoute(){this.isLoading=!0,this.errorMessage=null,this.routeService.getAllroute().subscribe({next:t=>{this.isLoading=!1,this.school_routes=t.data.school_routes},error:t=>{var n,l;this.isLoading=!1,this.errorMessage="Error al cargar las rutas: "+(t.message||"Error desconocido");const c=(null==t||null===(n=t.error)||void 0===n||null===(n=n.error)||void 0===n?void 0:n.message)||(null==t||null===(l=t.error)||void 0===l?void 0:l.error)||(null==t?void 0:t.message)||"Error desconocido";this.toastService.presentToast(c)}})}handleOpenRouteModal(t,n){n.id||console.log("error id route"),this.router.navigate([`/route/${n.id}`],{queryParams:{action:t}})}}return(o=s).\u0275fac=function(t){return new(t||o)(e.rXU(v.v),e.rXU(m.f),e.rXU(f.t),e.rXU(i.W3),e.rXU(b.n))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-tab3"]],standalone:!1,decls:20,vars:5,consts:[[1,"i-header"],[1,"i-toolbar-inner"],[1,"i-toolbar"],["size","large"],["size","auto"],["id","popover-button"],["alt","Silhouette of a person's head","src","https://ionicframework.com/docs/img/demos/avatar.svg"],["mode","ios","show-clear-button","always","clear-icon","trash-bin","value","Custom Clear Icon"],[1,"",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["class","loading-state ion-text-center",4,"ngIf"],["class","error-state ion-text-center",4,"ngIf"],[4,"ngIf"],["trigger","popover-button",3,"dismissOnSelect"],[1,"loading-state","ion-text-center"],["name","circles"],[1,"error-state","ion-text-center"],["name","warning-outline","color","danger"],[3,"click"],[3,"route","click",4,"ngFor","ngForOf"],[3,"click","route"],["routerLink","/sign-in",3,"button","detail"]],template:function(t,n){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"div",1)(3,"ion-row",2)(4,"ion-col")(5,"ion-title",3),e.EFF(6," Planificacion de Rutas "),e.k0s()(),e.j41(7,"ion-col",4)(8,"div")(9,"ion-avatar",5),e.nrm(10,"img",6),e.k0s()()()()(),e.nrm(11,"ion-searchbar",7),e.k0s()(),e.j41(12,"ion-content",8)(13,"ion-refresher",9),e.bIt("ionRefresh",function(c){return n.handleRefresh(c)}),e.nrm(14,"ion-refresher-content"),e.k0s(),e.DNE(15,P,4,0,"div",10)(16,R,6,1,"div",11)(17,M,2,1,"ion-list",12),e.k0s(),e.j41(18,"ion-popover",13),e.DNE(19,j,4,2,"ng-template"),e.k0s()),2&t&&(e.R7$(12),e.Y8G("fullscreen",!0),e.R7$(3),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",n.errorMessage),e.R7$(),e.Y8G("ngIf",!n.isLoading),e.R7$(),e.Y8G("dismissOnSelect",!0))},dependencies:[i.mC,i.Jm,i.hU,i.W9,i.eU,i.iq,i.uz,i.nf,i.To,i.Ki,i.ln,i.S1,i.w2,i.BC,i.ai,i.CF,i.Gw,i.N7,u.G,u.I,g.R,T.E],styles:["ion-modal[_ngcontent-%COMP%]{--height: 50%;--border-radius: 16px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}ion-modal[_ngcontent-%COMP%]::part(backdrop){background:var(--ion-background-color);opacity:1}ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: rgb(14 116 144);--color: var(--ion-text-placeholder-color)}"]}),s})()}];let x=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.m.forChild(F),g.m]}),s})();var C=r(1150);let L=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({providers:[v.v],imports:[i.bv,u.D,p.YN,x,p.X1,C.G]}),s})()}}]);