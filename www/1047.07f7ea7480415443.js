"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1047],{1047:(N,f,s)=>{s.r(f),s.d(f,{HttpLoaderFactory:()=>b,Tab1PageModule:()=>O});var a=s(7125),h=s(8834),v=s(9417),m=s(5528),_=s(467),T=s(6017),e=s(9498),C=s(3975),P=s(7831),F=s(8397),g=s(4909),j=s(3067),R=s(5423);function I(n,r){1&n&&(e.j41(0,"span"),e.EFF(1,"/"),e.k0s())}function k(n,r){if(1&n){const o=e.RV6();e.j41(0,"ion-card",1),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.showDetails())}),e.nrm(1,"ion-ripple-effect"),e.j41(2,"ion-card-header")(3,"ion-avatar"),e.nrm(4,"img",2),e.k0s(),e.j41(5,"span")(6,"ion-card-title"),e.EFF(7),e.nI1(8,"capitalCase"),e.k0s(),e.j41(9,"ion-card-subtitle"),e.EFF(10),e.k0s()()(),e.j41(11,"ion-card-content")(12,"p")(13,"ion-label"),e.EFF(14,"Telefono: "),e.j41(15,"ion-note"),e.EFF(16),e.DNE(17,I,2,0,"span",3),e.EFF(18),e.k0s()()(),e.j41(19,"p")(20,"ion-label"),e.EFF(21,"# Estudiantes: "),e.j41(22,"ion-note"),e.EFF(23),e.k0s()()()(),e.j41(24,"div"),e.nrm(25,"ion-icon",4)(26,"ion-icon",4),e.k0s()()}if(2&n){const o=e.XpG();e.R7$(4),e.Y8G("src",o.parent.image,e.B4B),e.R7$(3),e.SpI("",e.bMT(8,7,o.parent.name)," "),e.R7$(3),e.SpI("",o.parent.contact_address," "),e.R7$(6),e.SpI("",o.parent.phone," "),e.R7$(),e.Y8G("ngIf",o.parent.phone&&o.parent.mobile),e.R7$(),e.SpI(" ",o.parent.mobile,""),e.R7$(5),e.JRh(o.parent.number_students)}}let G=(()=>{var n;class r{constructor(t){this.translate=t,this.parent=null,this.handleActionClient=new e.bkB}ngOnInit(){console.log(this.parent,"l;l;l;l")}changeLanguage(t){this.translate.use(t="es"==t?"en":"es")}showDetails(){this.handleActionClient.emit("edit")}}return(n=r).\u0275fac=function(t){return new(t||n)(e.rXU(g.c$))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-parents"]],inputs:{parent:"parent"},outputs:{handleActionClient:"handleActionClient"},standalone:!1,decls:1,vars:1,consts:[["class","ion-activatable ripple-parent",3,"click",4,"ngIf"],[1,"ion-activatable","ripple-parent",3,"click"],["alt","Silhouette of a person's head",3,"src"],[4,"ngIf"],["name","chevron-forward-outline"]],template:function(t,i){1&t&&e.DNE(0,k,27,9,"ion-card",0),2&t&&e.Y8G("ngIf",i.parent)},dependencies:[a.mC,a.b_,a.I9,a.ME,a.HW,a.tN,a.iq,a.he,a.JI,a.S7,h.I,R.X],styles:["ion-card[_ngcontent-%COMP%]{position:relative}ion-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:64px;right:23px}ion-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px;margin:0 -6px}"]}),r})();const $=()=>["/add-client"];function M(n,r){1&n&&(e.j41(0,"div",18),e.nrm(1,"ion-spinner",19),e.j41(2,"p"),e.EFF(3,"Cargando Rutas..."),e.k0s()())}function y(n,r){if(1&n){const o=e.RV6();e.j41(0,"div",20),e.nrm(1,"ion-icon",21),e.j41(2,"p"),e.EFF(3),e.k0s(),e.j41(4,"ion-button",22),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.getAllParents())}),e.EFF(5,"Reintentar"),e.k0s()()}if(2&n){const o=e.XpG();e.R7$(3),e.JRh(o.errorMessage)}}function E(n,r){1&n&&(e.j41(0,"div",23),e.nrm(1,"ion-icon",24),e.j41(2,"p"),e.EFF(3,"No hay padres ni tutores disponibles."),e.k0s()())}function L(n,r){if(1&n){const o=e.RV6();e.j41(0,"app-parents",26),e.bIt("click",function(){const i=e.eBV(o).$implicit,l=e.XpG(2);return e.Njj(l.handleOpenClientModal("edit",i))}),e.k0s()}2&n&&e.Y8G("parent",r.$implicit)}function S(n,r){if(1&n&&(e.j41(0,"span"),e.DNE(1,L,1,1,"app-parents",25),e.k0s()),2&n){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.filteredParents)}}function x(n,r){if(1&n){const o=e.RV6();e.j41(0,"ion-content")(1,"ion-list")(2,"ion-item",27),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.logoutAndGoToSignIn())}),e.EFF(3,"Cerrar Sesi\xf3n"),e.k0s()()()}2&n&&(e.R7$(2),e.Y8G("button",!0)("detail",!1))}const X=[{path:"",component:(()=>{var n;class r{constructor(t,i,l,c,p,d,u,U,A){this.router=t,this.actionSheetCtrl=i,this.loading=l,this.alertController=c,this.parentService=p,this.toastService=d,this.translate=u,this.authService=U,this.modalController=A,this.parents=[],this.students=[],this.searchTerm="",this.filteredParents=[],this.hasData=!0,this.isLoading=!0,this.errorMessage=null}ngOnInit(){this.getAllParents()}handleRefresh(t){this.getAllParents(),setTimeout(()=>{t.target.complete()},2e3)}logoutAndGoToSignIn(){var t=this;return(0,_.A)(function*(){yield t.authService.logout(),t.router.navigate(["/sign-in"])})()}ionViewWillLeave(){"/sign-in"===this.router.url&&this.authService.logout()}filterParents(t){const i=(t.target.value||"").toLowerCase();this.filteredParents=i?this.parents.filter(l=>{var c,p,d,u;return(null===(c=l.name)||void 0===c?void 0:c.toLowerCase().includes(i))||(null===(p=l.email)||void 0===p?void 0:p.toLowerCase().includes(i))||(null===(d=l.mobile)||void 0===d?void 0:d.toLowerCase().includes(i))||(null===(u=l.phone)||void 0===u?void 0:u.toLowerCase().includes(i))}):[...this.parents],this.hasData=this.filteredParents.length>0}getAllParents(){this.isLoading=!0,this.errorMessage=null,this.parentService.getAllParents().subscribe({next:t=>{this.isLoading=!1,this.students=[t.data.students],this.parents=t.data.parents,this.filteredParents=[...this.parents],this.hasData=this.filteredParents.length>0,this.toastService.presentToast("Bienvenido!","custom-success-toast")},error:t=>{var i,l;this.isLoading=!1,this.errorMessage="Error al cargar padres: "+(t.message||"Error desconocido");const c=(null==t||null===(i=t.error)||void 0===i?void 0:i.error.message)||(null==t||null===(l=t.error)||void 0===l?void 0:l.error)||(null==t?void 0:t.message)||"Error desconocido";this.toastService.presentToast(c)}})}changeLanguage(t){this.translate.use(t="es"==t?"en":"es")}handleOpenClientModal(t,i){var l=this;return(0,_.A)(function*(){try{const c=yield l.modalController.create({component:T.T,componentProps:{action:t,partner_id:i.partner_id},initialBreakpoint:1,breakpoints:[0,1],cssClass:["loading-truck-options-sheet-modal"]});yield c.present();const{data:p}=yield c.onWillDismiss();if("cancel"===p.action)return}catch{}})()}}return(n=r).\u0275fac=function(t){return new(t||n)(e.rXU(C.t),e.rXU(a.GD),e.rXU(a.Xi),e.rXU(a.hG),e.rXU(P.C),e.rXU(F.f),e.rXU(g.c$),e.rXU(j.u),e.rXU(a.W3))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-tab1"]],standalone:!1,decls:24,vars:8,consts:[[1,"i-header"],[1,"i-toolbar-inner"],[1,"i-toolbar"],["size","large"],["size","auto"],["id","parent-button"],["alt","Silhouette of a person's head","src","https://ionicframework.com/docs/img/demos/avatar.svg"],["mode","ios","show-clear-button","always","clear-icon","trash-bin","placeholder","Buscar padre o tutor",3,"ionInput"],[1,"",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["class","loading-state ion-text-center",4,"ngIf"],["class","error-state ion-text-center",4,"ngIf"],["class","empty-state ion-text-center",4,"ngIf"],[4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"routerLink"],["name","add"],["trigger","parent-button",3,"dismissOnSelect"],[1,"loading-state","ion-text-center"],["name","circles"],[1,"error-state","ion-text-center"],["name","warning-outline","color","danger"],[3,"click"],[1,"empty-state","ion-text-center"],["name","information-circle-outline","color","medium"],[3,"parent","click",4,"ngFor","ngForOf"],[3,"click","parent"],[3,"click","button","detail"]],template:function(t,i){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"div",1)(3,"ion-row",2)(4,"ion-col")(5,"ion-title",3),e.EFF(6," Padres o Tutores "),e.k0s()(),e.j41(7,"ion-col",4)(8,"div")(9,"ion-avatar",5),e.nrm(10,"img",6),e.k0s()()()()(),e.j41(11,"ion-searchbar",7),e.bIt("ionInput",function(c){return i.filterParents(c)}),e.k0s()()(),e.j41(12,"ion-content",8)(13,"ion-refresher",9),e.bIt("ionRefresh",function(c){return i.handleRefresh(c)}),e.nrm(14,"ion-refresher-content"),e.k0s(),e.DNE(15,M,4,0,"div",10)(16,y,6,1,"div",11)(17,E,4,0,"div",12)(18,S,2,1,"span",13),e.j41(19,"ion-fab",14)(20,"ion-fab-button",15),e.nrm(21,"ion-icon",16),e.k0s()()(),e.j41(22,"ion-popover",17),e.DNE(23,x,4,2,"ng-template"),e.k0s()),2&t&&(e.R7$(12),e.Y8G("fullscreen",!0),e.R7$(3),e.Y8G("ngIf",i.isLoading),e.R7$(),e.Y8G("ngIf",i.errorMessage),e.R7$(),e.Y8G("ngIf",!i.isLoading&&!i.hasData),e.R7$(),e.Y8G("ngIf",!i.isLoading&&i.hasData),e.R7$(2),e.Y8G("routerLink",e.lJ4(7,$)),e.R7$(2),e.Y8G("dismissOnSelect",!0))},dependencies:[a.mC,a.Jm,a.hU,a.W9,a.Q8,a.YW,a.eU,a.iq,a.uz,a.nf,a.To,a.Ki,a.ln,a.S1,a.w2,a.BC,a.ai,a.CF,a.Gw,a.N7,h.G,h.I,m.R,G],encapsulation:2}),r})()}];let B=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[m.m.forChild(X),m.m]}),r})();var D=s(5218),Y=s(8041);function b(n){return new D.s(n,"./assets/translate/",".json")}let O=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({providers:[P.C],imports:[a.bv,h.D,v.YN,v.X1,B,g.h.forRoot({defaultLanguage:"es",loader:{provide:g.Wr,useFactory:b,deps:[Y.a]}})]}),r})()}}]);