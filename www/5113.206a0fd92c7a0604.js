"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5113],{5113:(L,g,a)=>{a.r(g),a.d(g,{Tab3PageModule:()=>E});var i=a(7125),u=a(8834),d=a(9417),v=a(5528),h=a(467),m=a(1432),e=a(9498),p=a(2167),f=a(8397),b=a(3975),T=a(7291),P=a(3067),R=a(5690);function _(t,s){1&t&&(e.j41(0,"div",14),e.nrm(1,"ion-spinner",15),e.j41(2,"p"),e.EFF(3,"Cargando Rutas..."),e.k0s()())}function M(t,s){if(1&t){const r=e.RV6();e.j41(0,"div",16),e.nrm(1,"ion-icon",17),e.j41(2,"p"),e.EFF(3),e.k0s(),e.j41(4,"ion-button",18),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.getAllRoute())}),e.EFF(5,"Reintentar"),e.k0s()()}if(2&t){const r=e.XpG();e.R7$(3),e.JRh(r.errorMessage)}}function j(t,s){if(1&t){const r=e.RV6();e.j41(0,"app-all-route",20),e.bIt("click",function(){const n=e.eBV(r).$implicit,l=e.XpG(2);return e.Njj(l.handleOpenRouteModal("edit",n))}),e.k0s()}2&t&&e.Y8G("route",s.$implicit)}function G(t,s){if(1&t&&(e.j41(0,"ion-list"),e.DNE(1,j,1,1,"app-all-route",19),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.Y8G("ngForOf",r.school_routes)}}function x(t,s){if(1&t){const r=e.RV6();e.j41(0,"ion-content")(1,"ion-list")(2,"ion-item",21),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.logoutAndGoToSignIn())}),e.EFF(3,"Cerrar Sesi\xf3n"),e.k0s()()()}2&t&&(e.R7$(2),e.Y8G("button",!0)("detail",!1))}const F=[{path:"",component:(()=>{var t;class s{constructor(o,n,l,c,I,y){this.routeService=o,this.toastService=n,this.router=l,this.modalController=c,this.storage=I,this.authService=y,this.school_routes=[],this.token="",this.isLoading=!0,this.errorMessage=null}ngOnInit(){const o=this;this.storage.get(m.N.FCM_TOKEN).then(n=>{o.token=JSON.stringify(n)})}logoutAndGoToSignIn(){var o=this;return(0,h.A)(function*(){yield o.authService.logout(),o.router.navigate(["/sign-in"])})()}handleRefresh(o){this.getAllRoute(),setTimeout(()=>{o.target.complete()},2e3)}ionViewWillEnter(){console.log("Tab3Page: ionViewWillEnter - La p\xe1gina va a ser visible"),this.getAllRoute()}ionViewDidEnter(){console.log("Tab3Page: ionViewDidEnter - La p\xe1gina ya es visible")}ionViewDidLeave(){console.log("Tab3Page: ionViewDidLeave - La p\xe1gina ha dejado de ser visible")}getAllRoute(){this.isLoading=!0,this.errorMessage=null,this.routeService.getAllroute().subscribe({next:o=>{this.isLoading=!1,this.school_routes=o.data.school_routes},error:o=>{var n,l;this.isLoading=!1,this.errorMessage="Error al cargar las rutas: "+(o.message||"Error desconocido");const c=(null==o||null===(n=o.error)||void 0===n||null===(n=n.error)||void 0===n?void 0:n.message)||(null==o||null===(l=o.error)||void 0===l?void 0:l.error)||(null==o?void 0:o.message)||"Error desconocido";this.toastService.presentToast(c)}})}handleOpenRouteModal(o,n){n.id||console.log("error id route"),this.router.navigate([`/route/${n.id}`],{queryParams:{action:o}})}}return(t=s).\u0275fac=function(o){return new(o||t)(e.rXU(p.v),e.rXU(f.f),e.rXU(b.t),e.rXU(i.W3),e.rXU(T.n),e.rXU(P.u))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tab3"]],standalone:!1,decls:20,vars:5,consts:[[1,"i-header"],[1,"i-toolbar-inner"],[1,"i-toolbar"],["size","large"],["size","auto"],["id","popover-button"],["alt","Silhouette of a person's head","src","https://ionicframework.com/docs/img/demos/avatar.svg"],["mode","ios","show-clear-button","always","clear-icon","trash-bin","value","Custom Clear Icon"],[1,"",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["class","loading-state ion-text-center",4,"ngIf"],["class","error-state ion-text-center",4,"ngIf"],[4,"ngIf"],["trigger","popover-button",3,"dismissOnSelect"],[1,"loading-state","ion-text-center"],["name","circles"],[1,"error-state","ion-text-center"],["name","warning-outline","color","danger"],[3,"click"],[3,"route","click",4,"ngFor","ngForOf"],[3,"click","route"],[3,"click","button","detail"]],template:function(o,n){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"div",1)(3,"ion-row",2)(4,"ion-col")(5,"ion-title",3),e.EFF(6," Planificacion de Rutas "),e.k0s()(),e.j41(7,"ion-col",4)(8,"div")(9,"ion-avatar",5),e.nrm(10,"img",6),e.k0s()()()()(),e.nrm(11,"ion-searchbar",7),e.k0s()(),e.j41(12,"ion-content",8)(13,"ion-refresher",9),e.bIt("ionRefresh",function(c){return n.handleRefresh(c)}),e.nrm(14,"ion-refresher-content"),e.k0s(),e.DNE(15,_,4,0,"div",10)(16,M,6,1,"div",11)(17,G,2,1,"ion-list",12),e.k0s(),e.j41(18,"ion-popover",13),e.DNE(19,x,4,2,"ng-template"),e.k0s()),2&o&&(e.R7$(12),e.Y8G("fullscreen",!0),e.R7$(3),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",n.errorMessage),e.R7$(),e.Y8G("ngIf",!n.isLoading),e.R7$(),e.Y8G("dismissOnSelect",!0))},dependencies:[i.mC,i.Jm,i.hU,i.W9,i.eU,i.iq,i.uz,i.nf,i.To,i.Ki,i.ln,i.S1,i.w2,i.BC,i.ai,i.CF,i.Gw,u.G,u.I,R.E],styles:["ion-modal[_ngcontent-%COMP%]{--height: 50%;--border-radius: 16px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}ion-modal[_ngcontent-%COMP%]::part(backdrop){background:var(--ion-background-color);opacity:1}ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: rgb(14 116 144);--color: var(--ion-text-placeholder-color)}"]}),s})()}];let C=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[v.m.forChild(F),v.m]}),s})();var k=a(1150);let E=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({providers:[p.v],imports:[i.bv,u.D,d.YN,C,d.X1,k.G]}),s})()}}]);