"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1047],{1047:(A,h,r)=>{r.r(h),r.d(h,{HttpLoaderFactory:()=>T,Tab1PageModule:()=>O});var o=r(7125),p=r(8834),m=r(9417),g=r(5528),f=r(467),P=r(6017),t=r(9498),C=r(3975),v=r(7831),F=r(8397),d=r(7408),R=r(3067),j=r(5423);function k(n,i){if(1&n){const a=t.RV6();t.j41(0,"ion-card",1),t.bIt("click",function(){t.eBV(a);const s=t.XpG();return t.Njj(s.showDetails())}),t.nrm(1,"ion-ripple-effect"),t.j41(2,"ion-card-header")(3,"ion-avatar"),t.nrm(4,"img",2),t.k0s(),t.j41(5,"span")(6,"ion-card-title"),t.EFF(7),t.nI1(8,"capitalCase"),t.k0s(),t.j41(9,"ion-card-subtitle"),t.EFF(10),t.k0s()()(),t.j41(11,"ion-card-content")(12,"p")(13,"ion-label"),t.EFF(14,"Telefono: "),t.j41(15,"ion-note"),t.EFF(16),t.k0s()()(),t.j41(17,"p")(18,"ion-label"),t.EFF(19,"# Estudiantes: "),t.j41(20,"ion-note"),t.EFF(21),t.k0s()()()(),t.j41(22,"div"),t.nrm(23,"ion-icon",3)(24,"ion-icon",3),t.k0s()()}if(2&n){const a=t.XpG();t.R7$(4),t.Y8G("src",a.parent.image,t.B4B),t.R7$(3),t.SpI("",t.bMT(8,5,a.parent.name)," "),t.R7$(3),t.SpI("",a.parent.contact_address," "),t.R7$(6),t.JRh(a.parent.phone),t.R7$(5),t.JRh(a.parent.number_students)}}let G=(()=>{var n;class i{constructor(e){this.translate=e,this.parent=null,this.handleActionClient=new t.bkB}ngOnInit(){console.log(this.parent,"l;l;l;l")}changeLanguage(e){this.translate.use(e="es"==e?"en":"es")}showDetails(){this.handleActionClient.emit("edit")}}return(n=i).\u0275fac=function(e){return new(e||n)(t.rXU(d.c$))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-parents"]],inputs:{parent:"parent"},outputs:{handleActionClient:"handleActionClient"},standalone:!1,decls:1,vars:1,consts:[["class","ion-activatable ripple-parent",3,"click",4,"ngIf"],[1,"ion-activatable","ripple-parent",3,"click"],["alt","Silhouette of a person's head",3,"src"],["name","chevron-forward-outline"]],template:function(e,s){1&e&&t.DNE(0,k,25,7,"ion-card",0),2&e&&t.Y8G("ngIf",s.parent)},dependencies:[o.mC,o.b_,o.I9,o.ME,o.HW,o.tN,o.iq,o.he,o.JI,o.S7,p.I,j.X],styles:["ion-card[_ngcontent-%COMP%]{position:relative}ion-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:64px;right:23px}ion-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px;margin:0 -6px}"]}),i})();const I=()=>["/add-client"];function M(n,i){1&n&&(t.j41(0,"div",17),t.nrm(1,"ion-spinner",18),t.j41(2,"p"),t.EFF(3,"Cargando Rutas..."),t.k0s()())}function x(n,i){if(1&n){const a=t.RV6();t.j41(0,"div",19),t.nrm(1,"ion-icon",20),t.j41(2,"p"),t.EFF(3),t.k0s(),t.j41(4,"ion-button",21),t.bIt("click",function(){t.eBV(a);const s=t.XpG();return t.Njj(s.getAllParents())}),t.EFF(5,"Reintentar"),t.k0s()()}if(2&n){const a=t.XpG();t.R7$(3),t.JRh(a.errorMessage)}}function $(n,i){if(1&n){const a=t.RV6();t.j41(0,"app-parents",23),t.bIt("click",function(){const s=t.eBV(a).$implicit,l=t.XpG(2);return t.Njj(l.handleOpenClientModal("edit",s))}),t.k0s()}2&n&&t.Y8G("parent",i.$implicit)}function S(n,i){if(1&n&&(t.j41(0,"span"),t.DNE(1,$,1,1,"app-parents",22),t.k0s()),2&n){const a=t.XpG();t.R7$(),t.Y8G("ngForOf",a.parents)}}function X(n,i){if(1&n){const a=t.RV6();t.j41(0,"ion-content")(1,"ion-list")(2,"ion-item",24),t.bIt("click",function(){t.eBV(a);const s=t.XpG();return t.Njj(s.logoutAndGoToSignIn())}),t.EFF(3,"Cerrar Sesi\xf3n"),t.k0s()()()}2&n&&(t.R7$(2),t.Y8G("button",!0)("detail",!1))}const y=[{path:"",component:(()=>{var n;class i{constructor(e,s,l,c,u,b,_,U,Y){this.router=e,this.actionSheetCtrl=s,this.loading=l,this.alertController=c,this.parentService=u,this.toastService=b,this.translate=_,this.authService=U,this.modalController=Y,this.parents=[],this.students=[],this.isLoading=!0,this.errorMessage=null}ngOnInit(){this.getAllParents()}handleRefresh(e){this.getAllParents(),setTimeout(()=>{e.target.complete()},2e3)}logoutAndGoToSignIn(){var e=this;return(0,f.A)(function*(){yield e.authService.logout(),e.router.navigate(["/sign-in"])})()}ionViewWillLeave(){"/sign-in"===this.router.url&&this.authService.logout()}getAllParents(){this.isLoading=!0,this.errorMessage=null,this.parentService.getAllParents().subscribe({next:e=>{this.isLoading=!1,console.log(e,"parentsssssssssssssssss"),this.parents=e.data.parents,this.students=[e.data.students],this.toastService.presentToast("Bienvenido!","custom-success-toast"),this.router.navigate(["tabs"])},error:e=>{var s,l;this.isLoading=!1,this.errorMessage="Error al cargar padres: "+(e.message||"Error desconocido");const c=(null==e||null===(s=e.error)||void 0===s?void 0:s.error.message)||(null==e||null===(l=e.error)||void 0===l?void 0:l.error)||(null==e?void 0:e.message)||"Error desconocido";this.toastService.presentToast(c)}})}changeLanguage(e){this.translate.use(e="es"==e?"en":"es")}handleOpenClientModal(e,s){var l=this;return(0,f.A)(function*(){try{const c=yield l.modalController.create({component:P.T,componentProps:{action:e,partner_id:s.partner_id},initialBreakpoint:1,breakpoints:[0,1],cssClass:["loading-truck-options-sheet-modal"]});yield c.present();const{data:u}=yield c.onWillDismiss();if("cancel"===u.action)return}catch{}})()}}return(n=i).\u0275fac=function(e){return new(e||n)(t.rXU(C.t),t.rXU(o.GD),t.rXU(o.Xi),t.rXU(o.hG),t.rXU(v.C),t.rXU(F.f),t.rXU(d.c$),t.rXU(R.u),t.rXU(o.W3))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-tab1"]],standalone:!1,decls:23,vars:7,consts:[[1,"i-header"],[1,"i-toolbar-inner"],[1,"i-toolbar"],["size","large"],["size","auto"],["id","parent-button"],["alt","Silhouette of a person's head","src","https://ionicframework.com/docs/img/demos/avatar.svg"],["mode","ios","show-clear-button","always","clear-icon","trash-bin","value","Custom Clear Icon"],[1,"",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["class","loading-state ion-text-center",4,"ngIf"],["class","error-state ion-text-center",4,"ngIf"],[4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"routerLink"],["name","add"],["trigger","parent-button",3,"dismissOnSelect"],[1,"loading-state","ion-text-center"],["name","circles"],[1,"error-state","ion-text-center"],["name","warning-outline","color","danger"],[3,"click"],[3,"parent","click",4,"ngFor","ngForOf"],[3,"click","parent"],[3,"click","button","detail"]],template:function(e,s){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"div",1)(3,"ion-row",2)(4,"ion-col")(5,"ion-title",3),t.EFF(6," Padres o Tutores "),t.k0s()(),t.j41(7,"ion-col",4)(8,"div")(9,"ion-avatar",5),t.nrm(10,"img",6),t.k0s()()()()(),t.nrm(11,"ion-searchbar",7),t.k0s()(),t.j41(12,"ion-content",8)(13,"ion-refresher",9),t.bIt("ionRefresh",function(c){return s.handleRefresh(c)}),t.nrm(14,"ion-refresher-content"),t.k0s(),t.DNE(15,M,4,0,"div",10)(16,x,6,1,"div",11)(17,S,2,1,"span",12),t.j41(18,"ion-fab",13)(19,"ion-fab-button",14),t.nrm(20,"ion-icon",15),t.k0s()()(),t.j41(21,"ion-popover",16),t.DNE(22,X,4,2,"ng-template"),t.k0s()),2&e&&(t.R7$(12),t.Y8G("fullscreen",!0),t.R7$(3),t.Y8G("ngIf",s.isLoading),t.R7$(),t.Y8G("ngIf",s.errorMessage),t.R7$(),t.Y8G("ngIf",!s.isLoading),t.R7$(2),t.Y8G("routerLink",t.lJ4(6,I)),t.R7$(2),t.Y8G("dismissOnSelect",!0))},dependencies:[o.mC,o.Jm,o.hU,o.W9,o.Q8,o.YW,o.eU,o.iq,o.uz,o.nf,o.To,o.Ki,o.ln,o.S1,o.w2,o.BC,o.ai,o.CF,o.Gw,o.N7,p.G,p.I,g.R,G],encapsulation:2}),i})()}];let E=(()=>{var n;class i{}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[g.m.forChild(y),g.m]}),i})();var L=r(5218),B=r(8041);function T(n){return new L.s(n,"./assets/translate/",".json")}let O=(()=>{var n;class i{}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({providers:[v.C],imports:[o.bv,p.D,m.YN,m.X1,E,d.h.forRoot({defaultLanguage:"es",loader:{provide:d.Wr,useFactory:T,deps:[B.a]}})]}),i})()}}]);